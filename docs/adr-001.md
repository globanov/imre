# ADR-001: Event-Driven Workload Aggregation

## Status
Accepted (MVP)

## Context
We need to update weekly workload totals when a shift is created.

## Decision
Use **synchronous event processing** within the same HTTP request:
- No message broker (Redis/Kafka)
- No separate worker process
- Event handler (`handle_shift_created`) called directly from API view
- Full operation is atomic (DB transaction includes shift creation and aggregate update)

## Rationale
- **Simplicity**: no operational complexity (no Redis, no Celery)
- **Consistency**: immediate visibility of updated aggregates
- **Debuggability**: single call stack, easy logging
- **MVP focus**: async can be added later if needed

## Consequences
- HTTP request latency includes aggregation time (~1â€“5 ms)
- No retry mechanism for failed updates (but failures are rare in sync flow)
- Future scalability requires extracting worker (low effort due to clean architecture)
